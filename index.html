<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css">
    <script src="./dist/Auth.js"></script>
  </head>

  <body>    
    <section class='section'>
      
      <button class='button' id='login'>login</button>
      <button class='button' id='loginPopup'>login Popup</button>
      <pre class='box' id='message'></pre>
      
    </section>

    
    <script>
      var auth = new Auth({
	baseUrl: 'https://login.operatoroverload.com',
	clientId: '47ile8emo7m8flnhjfuc5aa9i0',
	onLogin: function () {
	  auth.getToken().then( token => {
	    message.innerHTML = JSON.stringify( JSON.parse( atob(token.split('.')[1]) ), null, 2);      
	  });
	}
      });
      window['auth'] = auth;

      loginPopup.addEventListener('click', () => {
	auth.loginPopup().then(token => {
	  message.innerHTML = JSON.stringify(JSON.parse(atob(token.split('.')[1])), null, 4);
	});
      });

      login.addEventListener('click', () => {
	auth.login();
      });

      
    </script>
    
  </body>
</html>
