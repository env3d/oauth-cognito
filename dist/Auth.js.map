{"version":3,"sources":["Auth.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["STORAGE","AUTH_TOKEN","PKCE_VERIFIER","Auth","baseUrl","clientId","onLogin","loadFromStorage","refreshVerifier","redirect_uri","window","location","origin","pathname","addEventListener","params","URLSearchParams","search","code","get","call","history","pushState","hash","token","JSON","parse","localStorage","getItem","randomString","verifier","base64URLEncode","console","warn","setItem","challenge","sha256","Promise","resolve","reject","authorize","then","t","catch","e","finally","id_token","timeToExpiry","refresh","atob","split","exp","Date","getTime","tokenEndpoint","refresh_token","grant_type","log","body","join","fetch","method","headers","res","json","error","Object","assign","stringify","crypto","getRandomValues","String","fromCharCode","apply","Uint8Array","map","b","randomBytes","loginUrl","href","str","toString","replace","ascii","rightRotate","value","amount","mathPow","Math","pow","maxWord","lengthProperty","i","j","words","asciiBitLength","h","k","primeCounter","isComposite","candidate","charCodeAt","w","slice","oldHash","i2","w15","w2","a","temp1","temp2","concat","result","push","btoa","from","module","exports","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","message","stack","overlay","createErrorOverlay","document","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","d","dep","Array","isArray","length","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"Auth.js","sourceRoot":"..","sourcesContent":["const STORAGE = {\n  AUTH_TOKEN: 'auth_token',\n  PKCE_VERIFIER: 'auth_verifier'\n};\n\nexport default class Auth {\n  \n  constructor({ baseUrl, clientId, onLogin } = {} ) {\n\n    // this.token is now filled, either with an empty object or with tokens\n    this.loadFromStorage();\n    // get the verifier from storage so we can send challenge\n    this.refreshVerifier();\n    \n    this.baseUrl = baseUrl || 'https://login.operatoroverload.com';\n    this.clientId = clientId || '47ile8emo7m8flnhjfuc5aa9i0';    \n    this.redirect_uri = `${window.location.origin}${window.location.pathname}`;\n    \n    window.addEventListener('load', () => {\n      let params = new window.URLSearchParams(window.location.search);\n      this.code = params.get('code');\n      if (this.code && onLogin) onLogin.call(this);\n\n      if (this.code) {\n        window.history.pushState(\n          {}, null, `${window.location.origin}${window.location.pathname}${window.location.hash}`\n        );\n      }\n      \n    });\n  }\n\n  loadFromStorage() {\n    this.token = JSON.parse(window.localStorage.getItem(STORAGE.AUTH_TOKEN)) || {};\n    return this.token;\n  }\n  \n  refreshVerifier( randomString = null ) {\n    // If caller provider randomString, replace the verifier,\n    // otherwise just load it from storage\n    this.verifier = randomString ? base64URLEncode(randomString) :\n      window.localStorage.getItem(STORAGE.PKCE_VERIFIER);\n\n    if (!this.verifier) {\n      console.warn(\"cannot generate or load verifier string, probably first time using this app.  Welcome!\");\n      // prime the store some something\n      this.verifier = 'some random string';\n    }\n    \n    window.localStorage.setItem(STORAGE.PKCE_VERIFIER, this.verifier);\n    \n    this.challenge = base64URLEncode(sha256(this.verifier));\n  }\n  \n  /**\n   * We get a token - only interested in the id_token\n   */\n  getToken() {\n    return new Promise( (resolve, reject) => {\n      if (this.code) {\n        this.authorize()\n          .then( t => resolve(t) )\n          .catch( e => reject(e) )\n          .finally( () => this.code = null );\n      } else if (this.token && this.token.id_token) {\n        if (this.timeToExpiry() > 3570) {\n          resolve(this.token.id_token);\n        } else {\n          this.refresh().then( t => resolve(t) ).catch( e => reject(e) );\n        }\n      } else {\n        reject(\"cannot refresh and not auth code, should start login flow\");\n      }\n    });\n  }\n\n  timeToExpiry(id_token) {\n    id_token = id_token || this.token.id_token;\n    return JSON.parse( window.atob(id_token.split('.')[1]) ).exp - ((new Date()).getTime() / 1000);\n  }\n\n  refresh() {\n    return this.tokenEndpoint( { refresh_token: this.token.refresh_token } );\n  }\n  \n  authorize() {\n    return this.tokenEndpoint( { code: this.code} );\n  }\n  \n  tokenEndpoint( { code: code, refresh_token: refresh_token } ) {\n\n    let grant_type = refresh_token ? 'refresh_token' : 'authorization_code';    \n    console.log(`getting ${grant_type}`);\n    \n    let body = [\n      `client_id=${this.clientId}`,\n      `grant_type=${grant_type}`,      \n      `redirect_uri=${this.redirect_uri}`,\n      refresh_token ? `refresh_token=${refresh_token}` : '',\n      code ? `code=${code}` : '',\n      `code_verifier=${this.verifier}`\n    ].join('&');\n    \n    return new Promise( (resolve, reject) => {\n      window.fetch(`${this.baseUrl}/oauth2/token`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body\n      }).then( res => {\n        return res.json();\n      }).then( json => {\n        console.log(json);\n        if (json.error) {\n          reject( json );\n        } else {        \n          // save the token in storage and in the object\n          Object.assign(this.token, json);\n          window.localStorage.setItem(STORAGE.AUTH_TOKEN, JSON.stringify(this.token));\n          resolve( json.id_token );\n        }\n      });      \n    });\n  }\n  \n  login() {    \n    let randomString = crypto.getRandomValues ? String.fromCharCode.apply(\n      null, crypto.getRandomValues(new Uint8Array(10)).map( b => b%26 + 97)\n    ) : crypto.randomBytes(32);\n    \n    this.refreshVerifier(randomString);\n    \n    let loginUrl = [\n      `${this.baseUrl}/login?client_id=${this.clientId}`,\n\t    `response_type=code`,\n\t    `scope=email+openid+profile`,\n      `code_challenge=${this.challenge}`,\n      `code_challenge_method=S256`,\n\t    `redirect_uri=${this.redirect_uri}`\n    ].join('&');\n\n    window.location.href = loginUrl;\n  };    \n}\n\n// Support functions\nfunction base64URLEncode(str) {\n    return str.toString('base64')\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=/g, '');\n}\n\n// from https://geraintluff.github.io/sha256/\n// but modified to output base64\nfunction sha256(ascii) {\n\tfunction rightRotate(value, amount) {\n\t\treturn (value>>>amount) | (value<<(32 - amount));\n\t};\n\t\n\tvar mathPow = Math.pow;\n\tvar maxWord = mathPow(2, 32);\n\tvar lengthProperty = 'length'\n\tvar i, j; // Used as a counter across the whole file\n\n\tvar words = [];\n\tvar asciiBitLength = ascii[lengthProperty]*8;\n\t\n\t//* caching results is optional - remove/add slash from front of this line to toggle\n\t// Initial hash value: first 32 bits of the fractional parts of the square roots of the first 8 primes\n\t// (we actually calculate the first 64, but extra values are just ignored)\n\tvar hash = sha256.h = sha256.h || [];\n\t// Round constants: first 32 bits of the fractional parts of the cube roots of the first 64 primes\n\tvar k = sha256.k = sha256.k || [];\n\tvar primeCounter = k[lengthProperty];\n\t/*/\n\tvar hash = [], k = [];\n\tvar primeCounter = 0;\n\t//*/\n\n\tvar isComposite = {};\n\tfor (var candidate = 2; primeCounter < 64; candidate++) {\n\t\tif (!isComposite[candidate]) {\n\t\t\tfor (i = 0; i < 313; i += candidate) {\n\t\t\t\tisComposite[i] = candidate;\n\t\t\t}\n\t\t\thash[primeCounter] = (mathPow(candidate, .5)*maxWord)|0;\n\t\t\tk[primeCounter++] = (mathPow(candidate, 1/3)*maxWord)|0;\n\t\t}\n\t}\n\t\n\tascii += '\\x80' // Append Ƈ' bit (plus zero padding)\n\twhile (ascii[lengthProperty]%64 - 56) ascii += '\\x00' // More zero padding\n\tfor (i = 0; i < ascii[lengthProperty]; i++) {\n\t\tj = ascii.charCodeAt(i);\n\t\tif (j>>8) return; // ASCII check: only accept characters in range 0-255\n\t\twords[i>>2] |= j << ((3 - i)%4)*8;\n\t}\n\twords[words[lengthProperty]] = ((asciiBitLength/maxWord)|0);\n\twords[words[lengthProperty]] = (asciiBitLength)\n\t\n\t// process each chunk\n\tfor (j = 0; j < words[lengthProperty];) {\n\t\tvar w = words.slice(j, j += 16); // The message is expanded into 64 words as part of the iteration\n\t\tvar oldHash = hash;\n\t\t// This is now the undefinedworking hash\", often labelled as variables a...g\n\t\t// (we have to truncate as well, otherwise extra entries at the end accumulate\n\t\thash = hash.slice(0, 8);\n\t\t\n\t\tfor (i = 0; i < 64; i++) {\n\t\t\tvar i2 = i + j;\n\t\t\t// Expand the message into 64 words\n\t\t\t// Used below if \n\t\t\tvar w15 = w[i - 15], w2 = w[i - 2];\n\n\t\t\t// Iterate\n\t\t\tvar a = hash[0], e = hash[4];\n\t\t\tvar temp1 = hash[7]\n\t\t\t\t+ (rightRotate(e, 6) ^ rightRotate(e, 11) ^ rightRotate(e, 25)) // S1\n\t\t\t\t+ ((e&hash[5])^((~e)&hash[6])) // ch\n\t\t\t\t+ k[i]\n\t\t\t\t// Expand the message schedule if needed\n\t\t\t\t+ (w[i] = (i < 16) ? w[i] : (\n\t\t\t\t\t\tw[i - 16]\n\t\t\t\t\t\t+ (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ (w15>>>3)) // s0\n\t\t\t\t\t\t+ w[i - 7]\n\t\t\t\t\t\t+ (rightRotate(w2, 17) ^ rightRotate(w2, 19) ^ (w2>>>10)) // s1\n\t\t\t\t\t)|0\n\t\t\t\t);\n\t\t\t// This is only used once, so *could* be moved below, but it only saves 4 bytes and makes things unreadble\n\t\t\tvar temp2 = (rightRotate(a, 2) ^ rightRotate(a, 13) ^ rightRotate(a, 22)) // S0\n\t\t\t\t+ ((a&hash[1])^(a&hash[2])^(hash[1]&hash[2])); // maj\n\t\t\t\n\t\t\thash = [(temp1 + temp2)|0].concat(hash); // We don't bother trimming off the extra ones, they're harmless as long as we're truncating when we do the slice()\n\t\t\thash[4] = (hash[4] + temp1)|0;\n\t\t}\n\t\t\n\t\tfor (i = 0; i < 8; i++) {\n\t\t\thash[i] = (hash[i] + oldHash[i])|0;\n\t\t}\n\t}\n  \n\tvar result = [];\n\tfor (i = 0; i < 8; i++) {\n\t\tfor (j = 3; j + 1; j--) {\n\t\t\tvar b = (hash[i]>>(j*8))&255;\n\t\t\t//result += ((b < 16) ? 0 : '') + b.toString(16);\n      result.push(b);\n\t\t}\n\t}\n  //return result;  \n\t//return Uint8Array.from(result);\n  \n  return btoa(String.fromCharCode.apply(null, Uint8Array.from(result)));\n};\n\n// Need to use commonjs module export for UMD\n// https://github.com/parcel-bundler/parcel/issues/766\n//\nmodule.exports = Auth;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}